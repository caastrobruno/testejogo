<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Super Pedido üíç</title>

<style>
html,body{
  margin:0;padding:0;overflow:hidden;
  background:#000;font-family:monospace;
  touch-action:none;
}
canvas{display:block;background:#5c94fc}
#hud{
  position:fixed;top:10px;left:10px;
  color:#fff;font-size:18px;z-index:5;
  text-shadow:2px 2px #000;
}
#proposal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.9);
  display:none;flex-direction:column;
  align-items:center;justify-content:center;
  color:white;text-align:center;z-index:10
}
#proposal button{
  font-size:24px;padding:12px 40px;margin:10px
}
</style>
</head>

<body>

<div id="hud">ü™ô <span id="score">0</span></div>
<canvas id="game"></canvas>

<div id="proposal">
  <h1>üíñ Quer casar comigo? üíñ</h1>
  <button onclick="yes()">SIM üíç</button>
  <button onclick="no()">N√ÉO</button>
  <h2 id="final"></h2>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const scoreEl=document.getElementById("score");
const proposal=document.getElementById("proposal");
const final=document.getElementById("final");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize();addEventListener("resize",resize);

/* CONSTANTES */
const GRAVITY=0.75;
const SPEED=4.5;
const JUMP=-16;
const groundY=canvas.height-90;

/* PLAYER */
const player={
  x:120,y:0,w:32,h:48,
  vx:0,vy:0,on:false,step:0
};

let cam=0,score=0;

/* MULTITOUCH ‚Äì 3 PARTS OF SCREEN */
let moveLeft = false;
let moveRight = false;
let wantJump = false;

canvas.addEventListener("touchstart", e => {
  e.preventDefault();
  moveLeft = moveRight = wantJump = false;

  const w = innerWidth;
  const third = w / 3;

  for (const t of e.touches) {
    const x = t.clientX;

    if (x < third) {
      moveLeft = true;
      player.dir = -1;
    } 
    else if (x < third * 2) {
      wantJump = true;
    } 
    else {
      moveRight = true;
      player.dir = 1;
    }
  }

  if (wantJump && player.on) {
    player.vy = JUMP;
    player.on = false;
  }
});

canvas.addEventListener("touchend", e => {
  moveLeft = moveRight = wantJump = false;

  const w = innerWidth;
  const third = w / 3;

  for (const t of e.touches) {
    const x = t.clientX;

    if (x < third) moveLeft = true;
    else if (x > third * 2) moveRight = true;
  }
});

/* WORLD */
const pipes=[
  {x:500,w:64,h:100},
  {x:900,w:64,h:140}
];

const coins=[
  {x:420,y:groundY-120,taken:false},
  {x:760,y:groundY-160,taken:false},
  {x:1050,y:groundY-120,taken:false}
];

const turtles=[
  {x:650,y:groundY-32,dir:1},
  {x:1150,y:groundY-32,dir:-1}
];

const castle={x:1400,w:180,h:200};

/* UPDATE */
function update(){
player.vy+=GRAVITY;
player.vx = moveLeft ? -SPEED : moveRight ? SPEED : 0;
player.x += player.vx;

  if(player.y+player.h>=groundY){
    player.y=groundY-player.h;
    player.vy=0;
    player.on=true;
  }

  pipes.forEach(p=>{
    if(player.x<p.x+p.w &&
       player.x+player.w>p.x &&
       player.y+player.h>groundY-p.h){
      if(player.vx>0)player.x=p.x-player.w;
      if(player.vx<0)player.x=p.x+p.w;
    }
  });

  coins.forEach(c=>{
    if(!c.taken &&
      player.x<c.x+20 &&
      player.x+player.w>c.x &&
      player.y<c.y+20 &&
      player.y+player.h>c.y){
      c.taken=true;
      score++;scoreEl.textContent=score;
    }
  });

  turtles.forEach(t=>{
    t.x+=t.dir*1.2;
    if(t.x<600||t.x>1200)t.dir*=-1;
  });

  if(player.x+player.w>castle.x){
    proposal.style.display="flex";
  }

  if(player.vx!==0)player.step=(player.step+1)%20;

  cam=player.x-canvas.width/2+player.w/2;
}

/* DRAW */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // GROUND
  ctx.fillStyle="#7c4a16";
  ctx.fillRect(-cam,groundY,4000,90);

  // PIPES
  pipes.forEach(p=>{
    ctx.fillStyle="#2ecc71";
    ctx.fillRect(p.x-cam,groundY-p.h,p.w,p.h);
  });

  // COINS
  coins.forEach(c=>{
    if(!c.taken){
      ctx.fillStyle="gold";
      ctx.beginPath();
      ctx.arc(c.x-cam,c.y,8,0,Math.PI*2);
      ctx.fill();
    }
  });

  // TURTLES
  turtles.forEach(t=>{
    ctx.fillStyle="#27ae60";
    ctx.fillRect(t.x-cam,t.y,32,20);
    ctx.fillStyle="#145a32";
    ctx.fillRect(t.x-cam+6,t.y+6,20,8);
  });

  // CASTLE
  ctx.fillStyle="#aaa";
  ctx.fillRect(castle.x-cam,groundY-castle.h,castle.w,castle.h);
  ctx.fillRect(castle.x-cam+50,groundY-castle.h-40,80,40);

  // PLAYER
  const x=player.x-cam,y=player.y;
  ctx.fillStyle="#ff0000";ctx.fillRect(x+6,y,20,8);
  ctx.fillStyle="#f1c27d";ctx.fillRect(x+8,y+8,16,12);
  ctx.fillStyle="#ff0000";ctx.fillRect(x+4,y+20,24,12);
  ctx.fillStyle="#0066ff";ctx.fillRect(x+4,y+32,24,12);
  ctx.fillStyle="#000";
  ctx.fillRect(x+6+(player.step<10?0:8),y+44,6,4);
  ctx.fillRect(x+20-(player.step<10?0:8),y+44,6,4);
}

/* LOOP */
(function loop(){update();draw();requestAnimationFrame(loop)})();

/* PROPOSAL */
function yes(){
  final.textContent="üéâ Player 2 desbloqueado para a vida toda üéâ";
}
function no(){
  final.textContent="‚ùå Essa fase n√£o aceita essa escolha üòè";
}
</script>

</body>
</html>




